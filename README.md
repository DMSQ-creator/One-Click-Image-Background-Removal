# 💎 AI 旗舰级抠图工具 (智能归档版)

> **版本特性**：本地直存 | 自动创建时间戳文件夹 | 彻底解决大文件下载失败问题

这是一个基于 **InSPyReNet** 模型的高精度抠图工具。专为批量处理设计，它会自动根据任务时间创建独立文件夹，让你的图片文件井井有条，不再混乱。

![Status](https://img.shields.io/badge/状态-稳定运行-green) ![Python](https://img.shields.io/badge/Python-3.8%2B-blue) ![Storage](https://img.shields.io/badge/存储-本地直存-orange)

## ✨ 核心优势

1.  **📂 智能归档**：每次点击开始，系统会自动创建一个类似 `20231027_1430_任务(10张)` 的新文件夹，防止新旧图片混杂。
2.  **🚀 极速保存**：处理完直接写入硬盘，**无需**通过浏览器下载 ZIP 包，彻底解决高清大图下载失败/超时的问题。
3.  **💎 旗舰画质**：针对发丝、婚纱、玻璃等半透明物体进行了极致优化。
4.  **👀 棋盘格预览**：界面提供灰白棋盘格背景预览，让你直观看到透明区域的抠图细节。

---

## 🛠️ 安装指南

### 1. 基础环境
确保你的电脑已安装 [Python 3.8+](https://www.python.org/downloads/)。

### 2. 安装依赖
打开终端（CMD / PowerShell），运行以下命令：

```bash
pip install streamlit transparent-background pillow
```

### 3. (强烈推荐) 开启显卡加速 ⚡
如果你有 NVIDIA 显卡，请安装 GPU 版 PyTorch 以获得 10-50 倍的速度提升。
*(前往 [PyTorch 官网](https://pytorch.org/get-started/locally/) 获取对应你显卡的安装命令，例如：)*

```bash
pip install torch torchvision --index-url https://download.pytorch.org/whl/cu118
```

---

## 📖 使用教程

### 第一步：启动软件
在代码所在目录下，打开终端运行：

```bash
streamlit run app_ultra_final.py
```
稍等片刻，浏览器会自动打开操作界面（默认地址 `http://localhost:8501`）。

### 第二步：配置参数 (左侧边栏)
1.  **选择精度等级**：
    *   `💎 旗舰画质`：细节最强，适合精修（推荐）。
    *   `⚡ 快速画质`：速度快，适合对边缘要求不高的场景。
2.  **图片分辨率限制**：
    *   推荐 `2048` 或 `4096`。
    *   *注意：若选择“不限制”且上传了 8K 超大图，可能会导致内存溢出闪退。*
3.  **上传图片**：
    *   支持多选（按住 Ctrl 或 Shift），支持 JPG / PNG / WEBP。

### 第三步：开始任务
点击侧边栏的 **▶️ 启动新任务** 按钮。

*   **自动化流程**：程序会自动创建一个带“日期+时间”的新文件夹，逐张处理图片，并直接保存进去。
*   **完成后**：如果是在 Windows 系统下，程序会自动弹窗打开该文件夹。

---

## 📂 文件夹结构说明

程序运行后，你的目录下会自动生成如下结构，非常清晰：

```text
我的项目目录/
├── app_ultra_final.py          # 主程序
├── 抠图任务归档/                # [自动生成] 总仓库文件夹
│   ├── 20260114_103001_任务(5张)/   # 上午10点半的任务
│   │   ├── photo1_nobg.png
│   │   ├── photo2_nobg.png
│   │   └── ...
│   ├── 20260114_140522_任务(12张)/  # 下午2点的任务
│   │   ├── imageA_nobg.png
│   │   └── ...
│   └── ...
```

---

## ❓ 常见问题 (Q&A)

### Q1: 第一次运行为什么卡住不动？
**A:** 首次运行需要下载模型权重文件（约 150MB-300MB）。
*   请查看终端（黑色窗口）是否有下载进度条。
*   如果下载失败，请参考下方的“模型手动下载”方案。

### Q2: 为什么网页上没有“打包下载”按钮了？
**A:** 不需要了。因为是**智能归档版**，图片已经直接保存在你的电脑硬盘里了（在 `抠图任务归档` 文件夹内）。这种方式比浏览器下载更稳定、更快。

### Q3: 提示 `Out of Memory` 或程序崩溃？
**A:** 图片太大了。请在左侧将“图片最大边长限制”设置为 `2048`。如果没有显卡仅用 CPU 跑，内存压力会比较大。

---

## 🔧 模型下载失败解决方案
如果终端提示连接超时，无法自动下载模型：

1.  手动下载模型文件：[ckpt_base.pth (GitHub链接)](https://github.com/plemeri/transparent-background/releases/download/1.2.12/ckpt_base.pth)
2.  找到用户目录下的隐藏文件夹：`C:\Users\你的用户名\.transparent-background\`
3.  将下载的文件放入该文件夹即可。

---

**享受高效、整洁的抠图体验！** 💎
